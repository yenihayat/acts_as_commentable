<% render 'admin/shared/jqtransform' %>
<div class="jqTransform">
  <div class="f_field clearfix">
    <%= select_tag "comments_select", options_for_select([["#{t 'comment.all'} (#{@comments.size})", "all"], ["#{t 'comment.approved'} (#{@comments.accepted.size})", "accepted"], ["#{t 'comment.rejected'}(#{@comments.denied.size})", "denied"], ["#{t 'comment.pending'} (#{@comments.pending.size})", "pending"]]),
                   {:onchange => remote_function(
                           :url => {:controller => 'comment_admin', :action => 'set_comment_table', :id => @commentable.id, :type => @commentable.class.name},
                           :with => "'comment_type=' + $(this).val()",
                           :before => "$('#indicator').show();$('#comments_table').hide()",
                           :complete => "$('#indicator').hide();$('#comments_table').show()"
                   )}
    %>
  </div>
  <div class="form_sep"></div>
  <div style="display: none;" id="indicator">
    <%= image_tag "indicator.gif" %>
  </div>
  <div id="comments_table">
    <%= render :partial => "table", :locals => { :comments => @comments } %>
  </div>
</div>